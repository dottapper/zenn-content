---

title: "Vercel ã§ 3D Gaussian Splatting (.ply) ãŒè¡¨ç¤ºã•ã‚Œãªã„?!Â GitÂ LFS ãƒã‚¤ãƒ³ã‚¿å•é¡Œã‚’ 15 åˆ†ã§è§£æ±ºã—ãŸãƒ¡ãƒ¢"
emoji: "ğŸš€"
type: "tech"
topics: \["three.js", "vercel", "git-lfs", "webgl", "3dgs"]
published: false
----------------

## TL;DR

* **Network ã‚¿ãƒ–ã§ .ply ãŒ 0â€¯kB** â†’ ã»ã¼Â 100â€¯% GitÂ LFS ãƒã‚¤ãƒ³ã‚¿ã—ã‹é…ä¿¡ã•ã‚Œã¦ã„ãªã„ã€‚
* **GitHub ã§ `Stored with GitÂ LFS`** ã¨å‡ºã¦ã„ãŸã‚‰ãƒã‚¤ãƒ³ã‚¿ç¢ºå®šã€‚
* å¯¾å¿œã¯ 2 æŠğŸ‘‡

  1. **Vercel å´ã§Â GitÂ LFS ã‚’æœ‰åŠ¹ã«ã™ã‚‹**ï¼ˆãƒ“ãƒ«ãƒ‰ãŒèµ°ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã‚‰ *Git â†’ EnableÂ LFS* ã‚’ ONï¼‰ã€‚
  2. **ãƒã‚¤ãƒ³ã‚¿ã‚’å¤–ã—å®Ÿä½“Â 32â€¯MBÂ ã‚’ç›´æ¥ã‚³ãƒŸãƒƒãƒˆ**ï¼ˆ`git lfs untrack` â†’ `git rm --cached` â†’ `git add`ï¼‰ã€‚
* hash ä»˜ã *Preview URL* ã¯ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆã€‚å…¬é–‹å…±æœ‰ã¯ **Production URL** ã‚’ä½¿ã†ã€‚

## èƒŒæ™¯

èŠ±ã®Â 3DÂ GaussianÂ Splatting (.ply) ã‚’ **ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³**ã«ç½®ã„ãŸ LP ã‚’ Vercel ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚‰ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§è¦‹ãˆã¦ã„ã‚‹ 3D ãŒæœ¬ç•ªã§ã¯çœŸã£ç™½ï¼†èµ¤ã„ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒãƒ¼ã ã‘â€¦ã€‚

DevTools ã«ã¯ `Invalid ply header`ã€‚ã‚µã‚¤ã‚ºã‚’è¦‹ãŸã‚‰ **0â€¯kB** ã§é…ä¿¡ã•ã‚Œã¦ã„ãŸã€‚

![NetworkÂ 0kB screenshot](./images/network-0kb.png)

## åŸå› ã‚’çµã‚Šè¾¼ã‚€ã¾ã§ã®Â 5Â åˆ†

| ãƒã‚§ãƒƒã‚¯                   | çµæœ                       |
| ---------------------- | ------------------------ |
| **Network Size**       | 0â€¯kB / 304 â†’Â ãƒ•ã‚¡ã‚¤ãƒ«ãŒç©º      |
| **GitHub ã§ .ply ã‚’é–‹ã**  | *Stored withÂ GitÂ LFS* è¡¨ç¤º |
| **`git lfs ls-files`** | å¯¾è±¡ .ply ãŒãƒªã‚¹ãƒˆã«å±…ã‚‹          |

â†’ **GitÂ LFS ãƒã‚¤ãƒ³ã‚¿ã ã‘ãŒãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã€Vercel ãƒ“ãƒ«ãƒ‰ã§å®Ÿä½“ãŒå–ã‚Œã¦ã„ãªã„** ã¨ç¢ºå®šã€‚

## è§£æ±ºç­–Â AÂ â€”Â Vercel ã§ GitÂ LFS ã‚’æœ‰åŠ¹åŒ–

1. **Project â†’ Settings â†’ Git â†’ Git Large File Storage** ã‚’Â **ON**ã€‚
2. `Redeploy`ã€‚
3. ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ã«

   ```bash
   > git lfs fetch --all
   > git lfs checkout
   ```

   ãŒå‡ºã‚Œã° OKã€‚

> æ³¨æ„: **static only** ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã¨ `vercel build` ãŒ 0.06Â ç§’ã§çµ‚ã‚ã‚Šã€LFS ã‚³ãƒãƒ³ãƒ‰ãŒèµ°ã‚‰ãªã„ã€‚<br>package.json ã« `"vercel-build": "git lfs pull"` ã‚’ç½®ããªã©ã€Œãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒƒãƒ—ã€ã‚’ä½œã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

## è§£æ±ºç­–Â BÂ â€”Â ãƒã‚¤ãƒ³ã‚¿è§£é™¤ï¼‹å®Ÿä½“ã‚³ãƒŸãƒƒãƒˆ (ä»Šå›ã¯ã“ã‚Œã§çªç ´)

```bash
# 1. LFS è¿½è·¡ã‚’å¤–ã™
git lfs untrack "scene.compressed-viewer/scene.compressed.ply"

# 2. ãƒã‚¤ãƒ³ã‚¿ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹ã‚‰å¤–ã™
git rm --cached scene.compressed-viewer/scene.compressed.ply

# 3. å®Ÿä½“ãŒ 32â€¯MB ã‚ã‚‹ã‹ç¢ºèª
ls -lh scene.compressed-viewer/scene.compressed.ply

# 4. å®Ÿä½“ã‚’å†è¿½åŠ 
git add scene.compressed-viewer/scene.compressed.ply

# 5. ã‚³ãƒŸãƒƒãƒˆ & ãƒ—ãƒƒã‚·ãƒ¥
git commit -m "Embed PLY directly (remove LFS)"
git push origin main
```

GitHub ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¨ *Binary file cannot be displayed* ã¨ã ã‘å‡ºã¦ã€**Stored with GitÂ LFS** ãŒæ¶ˆãˆã‚Œã°æˆåŠŸã€‚Vercel ãŒè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ â†’ Network ã« **32â€¯MB** ãŒè¼‰ã‚Œã° 3D å¾©æ´»ï¼

## ã€Œãƒ­ã‚°ã‚¤ãƒ³ã—ãªã„ã¨è¦‹ã‚‰ã‚Œãªã„?ã€ã‚’è§£æ±º

* `https://<hash>-project.vercel.app` ã¯ *PreviewÂ URL* â†’ `ProtectÂ PreviewÂ Deployments` ãŒ ON ã ã¨è¦ãƒ­ã‚°ã‚¤ãƒ³ã€‚
* **Production** ã‚¨ã‚¤ãƒªã‚¢ã‚¹ `https://project.vercel.app` ã‚’å…±æœ‰ã™ã‚Œã°èª°ã§ã‚‚é–²è¦§å¯èƒ½ã€‚
* *Protect Preview Deployments* ã¯ *Settings â†’ General* ã§ OFF ã«ã§ãã‚‹ã€‚

## ã¤ã„ã§ã«ã‚„ã£ãŸã“ã¨

* ä¸è¦ã«ãªã£ãŸ `sample/` ã¨ `.DS_Store` ã‚’ `git rm -r`ã€‚
* `.gitignore` ã« `.DS_Store` è¿½åŠ ã€‚
* progressÂ bar ãŒæ°—ã«ãªã£ãŸã®ã§ CSS ã§éè¡¨ç¤ºã€‚

```css
#progressBar { display: none !important; }
```

## ä»Šå¾Œã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¡ãƒ¢

* **Draco + glTF** or **meshopt** ã§ã•ã‚‰ã«è»½ãã€‚ï¼ˆ3DGSã§ã¯ãªãå¾“æ¥ã®3Dãƒ¢ãƒ‡ãƒ«ï¼ˆ.glb, .gltfï¼‰ã‚’ä½¿ã†ã¨ãï¼‰
* ãƒ­ãƒ¼ãƒ‰å¾Œã« `OrbitControls.enableZoom = false` ã§ UX æ”¹å–„ã€‚
* `IntersectionObserver` ã§é…å»¶ãƒ­ãƒ¼ãƒ‰ã—ã¦ LCP ã‚’ç¨¼ãã€‚ï¼ˆé•·ã„ãƒšãƒ¼ã‚¸ã§ä¸‹ã®æ–¹ã«3Dã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚ã‚‹å ´åˆ
è¤‡æ•°ã®3Dãƒ¢ãƒ‡ãƒ«ã‚’1ãƒšãƒ¼ã‚¸ã«é…ç½®ã™ã‚‹å ´åˆï¼‰

---

### å‚è€ƒãƒªãƒ³ã‚¯

* VercelÂ DocsÂ â€”Â [GitÂ LFS](https://vercel.com/docs/git-integrations/git-lfs)
* Three.jsÂ DocsÂ â€”Â [PLYLoader](https://threejs.org/docs/index.html?q=ply#examples/en/loaders/PLYLoader)

> ä»¥ä¸Šã€æ³£ããªãŒã‚‰ 3D ã‚¬ã‚¦ã‚·ã‚¢ãƒ³ã‚¹ãƒ—ãƒ©ãƒƒãƒˆã‚’ LP ã«è¼‰ã›ãŸæ—¥ã®å‚™å¿˜éŒ²ã§ã—ãŸã€‚
ãŸã ã€ã¾ã ã“ã‚Œã§ã„ã„ã®ã‹ã¨ä¸å®‰ãªã¨ã“ã‚ã‚‚ã‚ã‚‹ã®ã§ã€ï¼ˆå¤–éƒ¨ã‚µãƒ¼ãƒãƒ¼ã«ï¼“Dã‚’ãŠã„ãŸæ–¹ãŒã„ã„ã®ã‹ï¼Ÿãªã©ï¼‰ã€‚ã„ã‚ã„ã‚è©¦ã—ã¦ã¿ã¾ã™ã€‚